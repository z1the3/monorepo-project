# 跨域

同源策略限制了从同一个源加载的文档或脚本如何与另一个源的资源进行交互。这是浏览器的一个用于隔离潜在恶意文件的重要的安全机制。同源指的是：协议、端口号、域名必须一致。

访问同一域名下不同资源不会跨域

## CORS

浏览器将 CORS 分为简单请求和非简单请求：

简单请求不会触发 CORS 预检请求。若该请求满足以下两个条件，就可以看作是简单请求：

1）请求方法是以下三种方法之一：
● HEAD
● GET
● POST

2）HTTP 的头信息不超出以下几种字段：
● Accept
● Accept-Language
● Content-Language
● Last-Event-ID
● Content-Type：只限于三个值 application/x-www-form-urlencoded、multipart/form-data、text/plain
若不满足以上条件，就属于非简单请求了。

在简单请求中，在服务器内，至少需要设置字段：Access-Control-Allow-Origin

在非简单请求中，至少需要设置以下字段：

```
'Access-Control-Allow-Origin'
'Access-Control-Allow-Methods'
'Access-Control-Allow-Headers'
```

## JSONP

## postMessage 跨域

## nginx 代理跨域

## nodejs 中间件代理

## document.domain + iframe

## window.name + iframe 跨域

## WebSocket 协议跨域
