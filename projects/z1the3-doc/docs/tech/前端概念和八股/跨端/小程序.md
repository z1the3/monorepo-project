# 小程序

使用小程序 DSL+JS 开发，通过中间层桥接后调用原生能力

使用 webview 来渲染界面

## 小程序的运行环境

## 小程序的运行环境分成渲染层和逻辑层

其中 ttml 模板和 tss 样式工作在渲染层，js 脚本工作在逻辑层。

## 小程序的渲染层和逻辑层分别由 2 个线程管理

渲染层的界面使用了 WebView 进行渲染;逻辑层采用 JSC 线程运行 JS 脚本。

## 一个小程序存在多个界面、所以渲染层存在多个 WebView 线程

这两个线程的通信会经由客户端(下文中也会采用 Native 来代指客户端)做中转，逻辑层发送网络请求也经由 Native 转发，小程序的通信模型

## 小程序原理

区别于传统 Web 的单线程模型，小程序中的渲染层和逻辑层分别由两个线程管理。渲染层-Webview，逻辑层-JSCore。所有的通信都要经过 Native，包括网络请求。
逻辑层和视图层通过 setData 和 Event 通信：
逻辑层数据变更 setData 驱动渲染层的视图更新，渲染层交互触发事件，触发逻辑层的事件响应函数。

## 小程序中的 JSBridge 和普通的 JSBridge 有什么区别？

小程序中的 JSBridge 没有完整的浏览器环境，依赖客户端提供的环境

## JSBridge

JSBridge 是一种连接 JavaScript 和原生应用之间的桥梁技术，它的主要作用是使 JavaScript 能够调用原生功能，包括访问设备地址位置、摄像头以及支付等，从而在混合开发中简化前端与原生应用之间的交互。

实现 Native 端和 Web 端双向通信的一种机制
