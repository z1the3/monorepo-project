# 多主题和暗夜模式

亮色主题/暗色主题
在用户切换主题之后将用户的选择存储在 cookie 中
储存在 cookie 中的好处是保证 ssr 和 csr 拿到的结果是一样的

## 实现方法

## Css in js

emotion
将 CSS 样式转换为 JavaScript 代码并动态注入到页面中

1.初始化两套色卡, key 值保持一致

```js
export const BrightColors = {
  TextPrimary:....
}

export const DarkColors = {
  TextPrimary:....
}

```

2.通过 ThemeProvider （从 emotion/react 中引入）从顶层注入色卡

```js
const comp = styled.div({theme})=>({
  .....
    color: theme.colors.TextPrimary
})

```

3.在书写 css 代码中只需从色卡中取相同的 key 就可以了

4.当用户切换颜色时，会触发上层 peovider 中的 hooks，从而改变主题

## css 变量

在根元素下加上两种类名，都定义了 css 变量

```js
:root .isDark {
  --color-primary: rgba(1,1,1,1)
  --color-primary-hover: rgba(var(--primary-600),1)
}

:root .isLight{
  --color-primary: rgba(1,1,1,1)
  --color-primary-hover: rgba(var(--primary-600),1)
}

```

给根节点切换类名，从而匹配到对应的颜色主题

## 随不同系统变化

1.js 通过媒体查询，然后 onChange 事件
2.css 媒体查询
