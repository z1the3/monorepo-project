# 响应式方案

## UI 层适配

常见的响应式方案

### Media query

```css
/* css中使用  */
@media (max-width: 1600px) {
  width: 50%;
}
@media (max-width: 1300px) {
  display: none;
}
```

```js
// js中使用，创建mediaquery对象，然后监听onChange
const mediaQuery = window.matchMedia("(max-width: 1000px)");
mediaQuery.onChange = (e) => {
  if (e.matches) {
    // 达到临界点时给用户提示
    当前小于1000px;
  } else {
    当前大于1000px;
  }
};
```

### vw/vh

### grid/flex

### 要求：图片宽度不能小于 184px, 尽量占满一行，水平和上下间距固定

```css
display: grid;
grid-gap: 24px 16px;
grid-template-columns:
  repeat(auto-fill, minmax(184px, 1fr))
  auto-fill 尽可能多的列充满着一行，如果列不够不会扩展
  auto-fit 列不够，会把每一列强制放大占满一行;
```

## 特殊设备适配

建议抽离出通用 hooks
可以放在高阶组件里使用，然后原先的组件传进高阶组件，如果应该展示返回 children，否则返回 null

## 服务层适配

当应用在不同端或尺寸屏幕上有很大差异时，仅用前文的 UI 层适配就无法满足要求了，在同一个项目需要进行大量判断，复杂度和维护难度大大提升；建议把项目分割成多个项目，分别部署服务
解决方案：

- 在 monorepo 中初始化两个不同的 package 分别用于 PC 代码和 Mobile 代码
- 抽取通用的逻辑 utils （翻译逻辑，数据获取逻辑）
- 将项目部署在不同的服务上
- 在 TLB 层进行配置，请求时获取设备信息，将不同的用户分流到不同服务
