# NAT 网络地址转换

网络层 IP 转换的原理主要涉及网络地址转换（NAT），其基本功能是将私有网络内的 IP 地址转换为公共网络上的 IP 地址，反之亦然。这个过程通常发生在路由器或防火墙上，以实现**多个设备共享一个公共 IP 地址**访问互联网。具体原理包括：

地址替换：当内部网络设备发送数据包到外部网络时，NAT 会将数据包的源 IP 地址从私有 IP 转换为公共 IP。

端口转换（PAT）：由于多个设备可能同时访问外部网络，NAT 会使用端口号来区分不同设备的连接，通过端口-地址映射确保数据包返回时能够正确路由回相应的设备。

## 动态与静态 NAT

动态 NAT ：从一组有效的公共 IP 地址中动态分配一个给内部设备。

静态 NAT：每个内部设备有一个对应的公共 IP 地址，此种方式较少使用。
（每个设备内部写死）

传入连接管理：对于外部网络发起到内部网络的连接请求，NAT 需要提前进行配置，如通过端口转发来确保请求能到达正确的内部设备。

NAT 通过转换 IP 地址和管理端口来保障内网设备正常访外，同时增强了一定的网络安全性
