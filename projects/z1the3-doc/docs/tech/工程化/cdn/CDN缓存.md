# CDN 缓存

## 三级缓存

- 浏览器本地缓存
- CDN 边缘节点缓存
- CDN 源站缓存

## 缓存设置

如果缓存时间设置的过短，CDN 边缘节点缓存经常失效，导致频繁回源，增大了源站负载；

如果缓存时间设置的过长，文件更新慢，用户本地缓存不能及时更新

所以结合业务情况而定

## 不同静态资源类型缓存时间

- HTML: 3 分钟
- JS、CSS: 10 分钟，1 天，30 天

## CDN 缓存设置

```
http{
  server{
    listen 80;
    sever_name 123.com
    location ~* \.(jpg|jpeg|gif|bmp|png){
      expires 30d;
    }
  }
}


```

## 灾备

CDN 应用缓存时间由 10 分钟设置为 1 小时
